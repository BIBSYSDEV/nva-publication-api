dependencies {

    implementation project(":publication-commons")

    implementation libs.nva.apigateway
    implementation libs.nva.core
    implementation libs.nva.json
    implementation libs.nva.identifiers
    implementation libs.nva.datamodel.core

    implementation libs.aws.sdk.dynamodb
    implementation libs.aws.lambda.java.core
    implementation libs.guava

    runtimeOnly libs.jackson.databind
    testImplementation libs.jackson.databind
    runtimeOnly libs.jackson.core
    testImplementation libs.jackson.core

    testImplementation project(":publication-testing")
    testImplementation libs.nva.datamodel.testutils


    testImplementation libs.javafaker
    testImplementation libs.zalando
    testImplementation libs.nva.testutils

    //To support dynamodb local when testing, using mac m1
    if (System.getProperty("os.arch") == "aarch64") {
        testImplementation group: 'io.github.ganadist.sqlite4java', name: 'libsqlite4java-osx-aarch64', version: '1.0.392'
    }
}

test {
    environment "AWS_REGION", "eu-west-1"
    environment "COGNITO_HOST", "https://example.com"
    environment "ALLOWED_ORIGIN", "*"
}

