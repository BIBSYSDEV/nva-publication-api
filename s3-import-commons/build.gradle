dependencies {
    implementation project(":publication-constants")
    implementation project(":publication-commons")
    implementation project(":publication-model")

    implementation nvaLibs.s3
    implementation nvaLibs.core
    implementation nvaLibs.json
    implementation nvaLibs.eventhandlers
    implementation nvaLibs.identifiers
    implementation nvaLibs.apigateway

    implementation nvaCatalog.jackson.annotations
    implementation nvaCatalog.jackson.databind
    implementation nvaCatalog.jackson.core

    implementation nvaCatalog.aws.lambda.core

    implementation nvaCatalog.aws.sdk2.core
    implementation nvaCatalog.aws.sdk2.eventbridge
    implementation nvaCatalog.aws.sdk2.urlconnection
    implementation nvaCatalog.aws.sdk2.s3
    implementation nvaCatalog.aws.lambda.events
    implementation nvaCatalog.aws.sdk2.regions
    implementation nvaCatalog.aws.sdk2.http.client
    implementation nvaCatalog.aws.sdk.dynamo
    implementation nvaCatalog.aws.sdk.sqs

    implementation nvaCatalog.aws.ion

    implementation libs.apache.commons.collections
    implementation nvaCatalog.bundles.logging

    runtimeOnly nvaCatalog.jackson.datatype.jsr310
    runtimeOnly nvaCatalog.jackson.datatype.jdk8

    testImplementation project(":publication-testing")
    testImplementation nvaLibs.testutils
    testImplementation nvaLibs.logutils
    testImplementation nvaCatalog.aws.sdk2.utils
    testImplementation nvaCatalog.aws.sdk2.s3
    testImplementation nvaCatalog.datafaker
    testImplementation libs.mockito.junit.jupiter

    compileOnly nvaLibs.apigateway
    compileOnly nvaCatalog.zalando

    compileOnly(nvaCatalog.aws.sdk2.auth) {
        because "PMD complains about software/amazon/awssdk/auth/credentials/AwsCredentialsProvider "
    }
    compileOnly(nvaCatalog.aws.sdk.apigateway) {
        because "PMD complains for the com/amazonaws/regions/Regions class"
    }
    compileOnly(nvaCatalog.commons.validator) {
        because "PMD org/apache/commons/validator/routines/ISBNValidator"
    }
}

test {
    environment "MAX_SLEEP_TIME", "1"
    environment "FILENAME_EMISSION_EVENT_SUBTOPIC", "FILENAME_EMISSION_EVENT_SUBTOPIC"
    environment "BATCH_EMISSION_INTERVAL_MILLIS", "0"
    environment "EVENT_BUS_NAME", "eventBusName"
    environment "EVENTS_BUCKET", "theEventsBucket"
    environment "TABLE_NAME", "someTable"
    environment "CRISTIN_IMPORT_DATA_ENTRY_QUEUE_URL", "https://sqs.eu-west-1.amazonaws.com/someAccount/someQueue"
    environment "CRISTIN_IMPORT_PATCH_QUEUE_URL", "https://sqs.eu-west-1.amazonaws.com/someAccount/someQueue"
    environment "CRISTIN_IMPORT_NVI_PATCH_QUEUE_URL", "https://sqs.eu-west-1.amazonaws.com/someAccount/someQueue"
    environment "BRAGE_IMPORT_PATCH_QUEUE_URL", "https://sqs.eu-west-1.amazonaws.com/someAccount/someQueue"
}
