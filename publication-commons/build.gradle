plugins {
    id 'nva-publication-api.java-library-conventions'
}


dependencies {
    implementation project(":publication-constants")
    implementation libs.nva.apigateway
    implementation libs.nva.core
    implementation libs.nva.json
    implementation libs.nva.identifiers


    implementation(libs.nva.datamodel.core) {
        exclude group: 'com.github.bibsysdev', module: 'nva-commons'
    }

    implementation libs.aws.java.sdk.core
    implementation libs.aws.sdk.dynamodb

    implementation libs.jackson.databind
    implementation libs.jackson.annotations
    implementation libs.jackson.datatype.jsr310
    implementation libs.guava
    implementation libs.zalando

    runtimeOnly libs.jackson.core
    runtimeOnly libs.jackson.datatype.jdk8
    runtimeOnly libs.jackson.datatype.jsr310
    runtimeOnly libs.jackson.module.parameter.names
    implementation libs.bundles.logging

    testImplementation libs.bundles.testing
    testImplementation project(":publication-testing")

    //To support dynamodb local when testing, using mac m1
    if (System.getProperty("os.arch") == "aarch64") {
        testImplementation group: 'io.github.ganadist.sqlite4java', name: 'libsqlite4java-osx-aarch64', version: '1.0.392'
    }

}

test {
    environment "API_HOST", "api.dev.nva.aws.unit.no"
    environment "AWS_REGION", "eu-west-1"
    environment "COGNITO_HOST", "http://example.org"
    environment "RESULT_SET_SIZE_FOR_DYNAMODB_QUERIES", "5"
}




