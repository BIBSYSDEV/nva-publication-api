apply plugin: 'io.freefair.lombok'

dependencies {
    implementation project(":publication-model")
    implementation libs.tika.core
    implementation libs.tika.langdetect
    implementation libs.tika.langdetect.optimaize
    implementation libs.apache.commons.collections
    implementation project(":scopus-generate")
    implementation libs.xsd2java.jakarta
    implementation nvaCatalog.aws.sdk2.s3
    implementation nvaCatalog.aws.lambda.events
    implementation nvaCatalog.aws.sdk.dynamo
    implementation nvaCatalog.aws.sdk2.secrets

    implementation nvaLibs.s3
    implementation nvaLibs.secrets
    implementation nvaLibs.json
    implementation libs.nva.doi
    implementation nvaLibs.core
    implementation nvaLibs.eventhandlers
    implementation nvaLibs.apigateway
    implementation libs.nva.language
    implementation nvaLibs.logutils
    implementation nvaLibs.auth
    implementation nvaLibs.identifiers
    implementation nvaLibs.clients

    implementation nvaCatalog.aws.lambda.core
    implementation nvaCatalog.aws.lambda.events
    implementation nvaCatalog.bundles.logging
    implementation nvaCatalog.bundles.jackson
    implementation project(":publication-commons")
    implementation project(":s3-import-commons")
    implementation project(":expansion")

    testImplementation nvaLibs.testutils
    testImplementation nvaLibs.json

    testImplementation nvaCatalog.wiremock
    testImplementation project(":brage-import")
    testImplementation project(":brage-import")
    testImplementation project(":publication-testing")
    testImplementation project(":publication-model-testing")
}

test {
    environment "API_HOST", "api.localhost.nva.aws.unit.no"
    environment "EVENTS_BUCKET", "NvaEventsBucket"
    environment "EVENTS_BUS", "NvaEventBus"
    environment "PIA_REST_API", "someHost"
    environment "PIA_SECRETS_NAME", "someSecretName"
    environment "PIA_USERNAME_KEY", "someUserNameKey"
    environment "PIA_PASSWORD_KEY", "somePasswordNameKey"
    environment "TABLE_NAME", "nonExistingTable"
    environment "RESOURCES_TABLE_NAME", "resourcesNonExistingTable"
    environment "SCOPUS_IMPORT_BUCKET", "someBucket"
    environment "BACKEND_CLIENT_SECRET_NAME", "someSecret"
    environment "BACKEND_CLIENT_AUTH_URL", "https://auth.example.com"
    environment "IMPORT_CANDIDATES_STORAGE_BUCKET", "someBucket"
    environment "CROSSREF_FETCH_DOI_URI", "https://api.crossref.org/v1/works/"
    environment "CUSTOMER_ID", "someValue"
    environment "AWS_REGION", "eu-west-1"
    environment "XML_BUCKET_NAME", "xmlBucket"
}
