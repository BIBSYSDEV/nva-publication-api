#Constructs an organization with a topLevelAffiliation field determined by recursively looking in
#the orgs partOf-field until an org isn't part of another org.

PREFIX  nva: <https://nva.sikt.no/ontology/publication#>

CONSTRUCT {
  ?org nva:topLevelOrganization ?top_org .
  } WHERE {
  ?affiliation nva:affiliations ?org .
  ?org nva:partOf* ?top_org .
    FILTER NOT EXISTS { ?top_org nva:partOf ?e } .
}