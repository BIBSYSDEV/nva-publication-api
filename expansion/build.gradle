dependencies {
    implementation(project(':publication-commons'))
    implementation libs.nva.core
    implementation libs.nva.json
    implementation libs.nva.apigateway
    implementation libs.nva.identifiers
    implementation libs.nva.secrets
    implementation libs.nva.datamodel.core
    implementation libs.nva.datamodel.testutils
    implementation libs.jsonld
    implementation libs.guava
    implementation libs.aws.sdk.dynamodb

    testImplementation(project(':publication-testing'))
    testImplementation libs.nva.testutils
    testImplementation libs.bundles.testing

    //To support dynamodb local when testing, using mac m1
    if (System.getProperty("os.arch") == "aarch64") {
        testImplementation group: 'io.github.ganadist.sqlite4java', name: 'libsqlite4java-osx-aarch64', version: '1.0.392'
    }
}

test {
    environment "IDENTITY_SERVICE_SECRET_NAME", "secretName"
    environment "IDENTITY_SERVICE_SECRET_KEY", "secretKey"
    environment "API_HOST", "api.dev.nva.aws.unit.no"
    environment "AWS_REGION", "eu-west-1"
    environment "ID_NAMESPACE", "https://www.example.org/publication"

    // Disable remote context loading for JsonLd
    System.setProperty("com.github.jsonldjava.disallowRemoteContextLoading", "true")
}